<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Path Finder</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <link rel="stylesheet" href="voronoi_lines.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css">
  <script src="https://code.jquery.com/jquery-2.0.3.js"></script>
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>
  <script src="voronoi_lines.js"></script>
  <script src="biz_main.js"></script>
  <script src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>

  <script>
  $(function() {
    $( "#start" ).datepicker();
  });
  $(function() {
    $( "#end" ).datepicker();
  });
  $(function() {
    $( "#state" ).selectmenu();
  });
  $(function() {
    $( "#category" ).selectmenu();
  });
  $(function() {
    $( "#city").selectmenu();
  });
  </script>

  <style>
   fieldset {
     border: 0;
   }
   label {
     display: block;
     margin: 30px 0 0 0;
   }
   select {
     width: 150px;
   }
   .overflow {
     height: 200px;
   }

   .axis path,
   .axis line {
     fill: none;
     stroke: #000;
     shape-rendering: crispEdges;
   }

   .x.axis path {
     display: none;
   }

   .line {
     fill: none;
     stroke: steelblue;
     stroke-width: 1.5px;
   }
 </style>
</head>

<body>

<!-- not yet
<p>Start Date: <input type="text" id="start" onchange=newStartDate()></p>
<p>End Date: <input type="text" id="end" onchange=newEndDate()></p>
-->

<label for="city">Select a city</label>
<select name="city" id="city"></select>

<label for="state">Select a state</label>
<select name="state" id="state"></select>

<label for="category">Select a category</label>
<select name="category" id="category"></select>

<button type="button" id="refresh">Refresh Chart</button><br>

<!--<table id="leaderboard" class="display" width="100%"> </table>-->

<script>
// first and foremost
var host = '54.152.106.69'; //<the AWS host ip>;

//----------------------- viz components -------------------------

//----------------------- viz components -------------------------

//----------------------- initialization -------------------------
// populate state, city, category dropdowns
// TODO: you can see there are all kinds crap in the data: cleaning is a huge deal
initialize();
d3.select('body').append("svg").attr('id', 'voronoi');
d3.select('body').append('table').attr('id', 'leaderboard');

//----------------------- initialization -------------------------

//----------------------- event handlers -------------------------
function newStartDate() {
  if ($('#end').val() == "" || $('#state').val() == "") {
    // if end is null, do nothing
    return;
  }
  //alert($('#start').val())
  refreshData();
}

function newEndDate() {
  if ($('#start').val() == "" || $('#state').val() == "") {
    // if start is null, do nothing
    return;
  }
  //alert($('#end').val())
  refreshData();
}

$('#state').on('selectmenuchange', function() {
  //alert($('#state').val());
  //refreshData();
});

$('#category').on('selectmenuchange', function() {
  //alert($('#state').val());
  //refreshData();
});

$('#city').on('selectmenuchange', function() {
  //alert($('#state').val());
  //refreshData();
});

$('#refresh').click(function(){
  refreshData();
});
//----------------------- event handlers -------------------------
</script>

</body>
</html>
